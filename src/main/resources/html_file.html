<html>
<head>
    <link rel='icon' href='data:,'/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
            crossorigin="anonymous"></script>
    <style>
        span {
            text-align: center;
            font-size: 2vw;
        }
    </style>
</head>
<body>
<div style='float: right;'>
    <input type='checkbox' id='1231'>
    <label for='1231'>Aggiorna pagina automaticamente</label><br><br>
</div>
<div id='1232'></div>
<div id='1233'></div>
</body>
<script>

    $('#1231').prop('checked', true);
    update();
    $('#1231').prop('checked', false);

    function enable() {
        $.ajax({
            type: "GET",
            url: "79488975"
        }).done(function (res) {
            $('#1231').prop('checked', true);
            update();
        }).fail(function (jqXHR, textStatus, errorThrown) {
            alert("AJAX call failed: " + textStatus + ", " + errorThrown);
        });
    }

    function update() {
        if (!$('#1231').is(':checked')) {
            return;
        }

        $.ajax({
            type: "GET",
            url: "47450596",
            dataType: "text"
        }).done(function (res) {
            var response = parseInt(res);
            if (response > 0) {
                $('#1232').empty();
                $('#1233').empty();
                $('#1232').append('<span>Ancora ' + response + ' secondi rimanenti.</span>');
            } else {
                $('#1232').empty();
                $('#1233').empty();
                $('#1233').append('<button type="button" class="btn btn-primary btn-sm" onclick="enable()">Disattiva temporaneamente</button>');
                $('#1232').append('<span>Situazione come da quadro</span>');
            }
        }).fail(function (jqXHR, textStatus, errorThrown) {
            alert("AJAX call failed: " + textStatus + ", " + errorThrown);
        });
    }

    setInterval(update, 1000);
</script>
</html>